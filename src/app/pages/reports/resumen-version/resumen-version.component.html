<div class="font-semibold text-xl">Resumen de actividades por versión de proyecto</div>
<form [formGroup]="resumeForm" class="card flex flex-row gap-4 flex-wrap align-baseline" (submit)="getResume()">
    <p-iftalabel class="flex flex-col gap-2">
        <p-select inputId="ms_projects" [options]="projects" formControlName="selectedProjects" optionLabel="name"
            placeholder="Seleccione el proyecto" styleClass="w-100" display="chip" />
        <label for="ms_projects">Proyecto</label>
    </p-iftalabel>
    <p-iftalabel class="flex flex-col gap-2">
        <p-select inputId="ms_sprints" [options]="versions" formControlName="selectedVersion"
            placeholder="Seleccione la versión" styleClass="w-100" display="chip" />
        <label for="ms_sprints">Versión</label>
    </p-iftalabel>
    <div class="flex flex-col gap-2">
        <p-button label="Buscar" type="submit" icon="pi pi-search" size="large" [loading]="isLoading" />
    </div>
</form>
@if (isLoaded) {
    <p-fluid class="grid grid-cols-12 gap-8">
        <div class="col-span-12 xl:col-span-4">
            <div class="card h-100">
                @if (isLoading) {
                    <p-skeleton styleClass="h-full"></p-skeleton>
                }
                @else {
                    <div class="text-center">
                        <h3 class="text-5xl font-semibold tracking-tight text-balance sm:text-4xl">Inicio - Fin</h3>
                        <p class="mt-8 text-xl font-medium text-pretty sm:text-xl/10">{{ rangeDate }}</p>
        
                    </div>
                }
            </div>
        </div>
        <div class="col-span-12 xl:col-span-8">
            @if(isLoading)  {
                <div class="card h-100">
                    <p-skeleton styleClass="h-full"></p-skeleton>
                </div>
            }
            @else {
                <dl class="card grid grid-cols-1 gap-x-8 gap-y-16 text-center lg:grid-cols-4">
                    <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                        <p-chart type="doughnut" [data]="pieData" [options]="pieOptions" class="w-100" [width]="'100%'"></p-chart>
                    </div>
                    <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                        <dt class="text-base/7 ">Puntos totales</dt>
                        <dd class="order-first text-3xl font-semibold tracking-tight sm:text-5xl">{{ totalPoints }}</dd>
                    </div>
                    <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                        <dt class="text-base/7 ">Puntos del proyecto</dt>
                        <dd class="order-first text-3xl font-semibold tracking-tight sm:text-5xl text-[var(--p-indigo-500)]">{{ projectPoints }}</dd>
                    </div>
                    <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                        <dt class="text-base/7 ">Puntos fuera del proyecto</dt>
                        <dd class="order-first text-3xl font-semibold tracking-tight sm:text-5xl text-[var(--p-purple-500)]">{{ offProjectPoints }}</dd>
                    </div>
                </dl>
            }
        </div>
        <div class="col-span-12 xl:col-span-8">
            <div class="card">
                @if (isLoading) {
                    <p-skeleton styleClass="h-full"></p-skeleton>
                }
                @else {
                    <div class="font-semibold text-xl mb-4">Puntos del proyecto</div>
                    <p-chart type="bar" [data]="barStoryPointsData" [options]="barOptions"></p-chart>
                }
            </div>
        </div>
        <div class="col-span-12 xl:col-span-4">
            <div class="card">
                @if (isLoading) {
                    <p-skeleton styleClass="h-full"></p-skeleton>
                }
                @else {
                    <div class="font-semibold text-xl mb-4">Puntos fuera del proyecto</div>
                    <p-chart type="bar" [data]="barPointsData" [options]="barOptions"></p-chart>
                }
            </div>
        </div>
    </p-fluid>
}
